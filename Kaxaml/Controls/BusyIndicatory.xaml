<UserControl
    x:Class="Kaxaml.Controls.BusyIndicatory"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    mc:Ignorable="d"
    d:DesignHeight="450"
    d:DesignWidth="800">
    <FrameworkElement.Resources>
        <Geometry
            x:Key="CogPath.Geometry">
            M630.012 419.949
            C630.012 535.859 535.928 629.942 420.018 629.942
            C304.108 629.942 210.024 535.859 210.024 419.949
            C210.024 304.039 304.108 209.955 420.018 209.955
            C535.928 209.955 630.012 304.039 630.012 419.949 Z
            M665.331 760.846 L592.587 802.844 L550.323 729.642 L462.017 753.303 L462.017 837.831
            L378.019 837.831 L378.019 753.303 L289.713 729.642 L247.449 802.844 L174.705 760.846
            L216.969 687.643 L152.324 622.998 L79.120 665.262 L37.122 592.518 L110.325 550.254
            L86.663 461.947 L2.135 461.947 L2.135 377.95 L86.663 377.95 L110.325 289.643
            L37.122 247.38 L79.120 174.636 L152.324 216.9 L216.969 152.255 L174.705 79.051
            L247.449 37.053 L289.713 110.256 L378.019 86.594 L378.019 2.066 L462.017 2.066
            L462.017 86.594 L550.323 110.256 L592.587 37.053 L665.331 79.051 L623.067 152.255
            L687.712 216.9 L760.915 174.636 L802.914 247.38 L729.711 289.643 L753.372 377.95
            L837.9 377.95 L837.9 461.947 L753.372 461.947 L729.711 550.254 L802.914 592.518
            L760.915 665.262 L687.712 622.998 L623.067 687.643 L665.331 760.846 Z
        </Geometry>

        <!-- STORYBOARD -->
        <Storyboard
            x:Key="CogPath.SpinStoryboard"
            RepeatBehavior="Forever">
            <DoubleAnimation
                Duration="0:0:5"
                From="0"
                Storyboard.TargetName="PART_CogAnimation"
                Storyboard.TargetProperty="Angle"
                To="360" />
        </Storyboard>

        <!-- CONTROL TEMPLATE -->
        <ControlTemplate
            x:Key="CogPath.ControlTemplate"
            TargetType="Control">
            <Viewbox
                Stretch="Uniform">
                <Canvas
                    Width="840"
                    Height="840">
                    <Path
                        Data="{StaticResource CogPath.Geometry}"
                        Fill="{TemplateBinding Background}"
                        Stroke="{TemplateBinding BorderBrush}"
                        StrokeThickness="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=BorderThickness.Left}"
                        RenderTransformOrigin="0.5,0.5">
                        <Path.RenderTransform>
                            <RotateTransform
                                x:Name="PART_CogAnimation"
                                CenterX="0"
                                CenterY="0" />
                        </Path.RenderTransform>
                        <Path.Effect>
                            <DropShadowEffect
                                BlurRadius="80"
                                Color="Yellow"
                                ShadowDepth="0" />
                        </Path.Effect>
                    </Path>
                </Canvas>
            </Viewbox>
            <ControlTemplate.Triggers>
                <EventTrigger
                    RoutedEvent="FrameworkElement.Loaded">
                    <BeginStoryboard
                        Storyboard="{StaticResource  CogPath.SpinStoryboard}" />
                </EventTrigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </FrameworkElement.Resources>
    <Grid>
        <Control
            Background="Black"
            BorderBrush="White"
            BorderThickness="10"
            Height="{Binding 
                Path=ActualHeight,
                RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
            Width="{Binding 
                Path=ActualWidth,
                RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
            Template="{StaticResource CogPath.ControlTemplate}" />
    </Grid>
</UserControl>